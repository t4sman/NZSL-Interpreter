(()=>{"use strict";function e(e,t={}){const n=JSON.parse(document.getElementById("icons-data").textContent).iconsUrl,i=e.split("/").join("--"),a=t.scale;let o="";if(a){if(!["2x","3x","4x","5x"].includes(a))throw new Error(`Invalid icon scale factor: ${a}`);o=`scale${a}`}return`<span class="${["icon",void 0===t.baseline||t.baseline?"baseline":"",o,t.class||""].filter(Boolean).join(" ")}"><svg><use href="${n}#${i}"/></svg></span>`}function t(t,n){switch(null===t.getAttribute("data-original-contents")&&t.setAttribute("data-original-contents",t.innerHTML),n){case"initial":t.innerHTML=t.getAttribute("data-original-contents"),t.disabled=!1;break;case"loading":case"submitting":t.innerHTML=`${e("@loading-spinner",{class:"spin mr-1"})}Submitting&hellip;`,t.disabled=!0;break;case"captcha":t.innerHTML=`${e("@loading-spinner",{class:"spin mr-1"})}Waiting for CAPTCHA&hellip;`,t.disabled=!0}}function n(e){e.addEventListener("submit",(n=>{n.preventDefault();const i=e.querySelector('button[type="submit"]');t(i,"loading"),function(e){if(window.turnstile)return window.turnstile,void e(window.turnstile);window.onTurnstileLoaded=()=>{window.turnstile,e(window.turnstile)};const t=document.createElement("script");t.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit&onload=onTurnstileLoaded",document.head.appendChild(t)}((n=>{const a=e.querySelector(".captcha-container");a&&a.remove();const o=document.createElement("div");o.classList.add("captcha-container","d-flex","justify-content-center"),i.parentNode.insertBefore(o,i);const r=JSON.parse(document.getElementById("optins-data").textContent);n.render(o,{sitekey:r.turnstileSiteKey,appearance:"interaction-only",theme:"light",action:"optin",callback:t=>{HTMLFormElement.prototype.submit.call(e)},"error-callback":()=>{let e=o.querySelector(".captcha-error");e||(e=document.createElement("div"),e.classList.add("captcha-error","mb-3","text-danger","text-small"),o.appendChild(e)),e.innerHTML="CAPTCHA error. Please try again.",t(i,"initial")},"before-interactive-callback":()=>{o.classList.add("my-3"),t(i,"captcha")},"after-interactive-callback":()=>{t(i,"submitting")}})}))}))}var i;i=()=>{document.querySelectorAll('form[action="/optins/process/"]').forEach(n),document.querySelectorAll('form[action="/optins/consent/"]').forEach(n)},"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?i():document.addEventListener("DOMContentLoaded",i)})();